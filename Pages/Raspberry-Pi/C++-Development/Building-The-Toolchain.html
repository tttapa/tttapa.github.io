<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="author" content="Pieter P"/>
    <link rel="stylesheet" type="text/css" href="/CSS/Pages.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- No MathJax -->
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
    <meta name="theme-color" content="#ccc"/>
    <meta name="keywords" content="Raspberry Pi, Toolchain, Compiler, Crosstool-NG, GCC, C, C++, Fortran"/>
    <meta name="description" content="To compile software for the Raspberry Pi, you need a cross-compilation toolchain. This page contains instructions for how to build one."/>
    <title>Building the Cross-Compilation Toolchain</title>
</head>
<body>
    <nav>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" style="position:absolute;top:4px;right: 4px;">
                <path d="M0 0h48v48h-48z" fill="none"/>
                <path d="M6 36h36v-4h-36v4zm0-10h36v-4h-36v4zm0-14v4h36v-4h-36z"/>
            </svg>
            <h2><a href="/Pages">Pages</a></h2>
<ul>
    <li class="expanded"><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../index.html">Raspberry Pi</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../Installation+Setup/index.html">Installation and Setup</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../Installation+Setup/Setting-up-Ubuntu.html">Installing and Setting up Ubuntu</a></li>
            <li><span class="ftriangle"></span><a class="" href="../Installation+Setup/WiFi-Setup.html">Setting up the WiFi Connection</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../Python-Development/index.html">Python Development</a>
        <ul>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../C++-Development-RPiOS/index.html">Ubuntu to Raspberry Pi OS Cross C++ Development</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development-RPiOS/Installation.html">Installation and Setup</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development-RPiOS/Development-setup.html">Development setup</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development-RPiOS/Building-example-project.html">Building the C++ example project</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development-RPiOS/Debugging.html">Remote debugging</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../C++-Development-Ubuntu/index.html">Ubuntu to Ubuntu Cross C++ Development</a>
        <ul>
        </ul>
        </li>
        <li class="expanded"><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="index.html">C++ Development using Docker</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="Installation.html">Installation and setup</a></li>
            <li><span class="ftriangle"></span><a class="openEntry " href="Building-The-Toolchain.html">Building the Cross-Compilation Toolchain</a></li>
            <li><span class="ftriangle"></span><a class="" href="Dependencies.html">Cross-Compiling the Dependencies</a></li>
            <li><span class="ftriangle"></span><a class="" href="Installing-Dependencies.html">Installing the dependencies on the Pi</a></li>
            <li><span class="ftriangle"></span><a class="" href="Editor-Setup.html">Setting up Visual Studio Code for C++ Development</a></li>
            <li><span class="ftriangle"></span><a class="" href="Cpp-Program.html">Cross-Compiling the C++ Example Project</a></li>
            <li><span class="ftriangle"></span><a class="" href="Speedrun.html">Speedrun</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../NEON/index.html">NEON</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../NEON/Division.html">Division</a></li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/index.html">Arduino</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/index.html">Audio and Signal Processing</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/VU-Meters/index.html">VU Meters</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/VU-Meters/Model.html">Model of a moving-coil galvanometer</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/VU-Meters/Damped-Harmonic-Oscillator.html">The Damped Harmonic Oscillator</a></li>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Surface/index.html">Control Surface</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Surface/Developers/index.html">Developers</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Installation.html">Installation</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Style.html">Style</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Tests.html">Tests</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Generating-Documentation.html">Generating Documentation</a></li>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Theory/index.html">Control Theory</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/index.html">Motorized Faders</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/PID-Controllers.html">PID Controllers</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/PID-Cpp-Implementation.html">C++ Implementation</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/PID-Tuning.html">PID Tuning</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/Architecture.html">Architecture and Design Decisions</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/Hardware.html">Hardware</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/ATmega328P-Code.html">ATmega328P Code</a></li>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Bootloaders/index.html">Bootloaders</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../../Arduino/Bootloaders/ATmega328P-custom-frequency.html">Compiling Optiboot - ATmega328P at custom frequency</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/ESP8266/index.html">ESP8266</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/ESP8266/Flashing/index.html">Flashing</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/ESP8266/Flashing/Flashing-With-an-Arduino.html">Flashing the ESP8266 with an Arduino UNO</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/index.html">Mathematics &amp; Engineering</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/index.html">Systems and Control Theory</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Analog-Filters/index.html">Analog Filters &amp; Systems</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Analog-Filters/Butterworth-Filters.html">Butterworth Filters</a></li>
            </ul>
            </li>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/index.html">Digital Filters &amp; Systems</a>
            <ul>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/index.html">DTLTI Systems, Transfer Functions, and the Z-transform</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/DTLTI-Systems.html">DTLTI Systems</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/Impulse-and-Step-Response.html">Impulse and Step Response</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/Convolutions.html">Convolutions</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/The-Z-transform.html">The Z-transform</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/index.html">Exponential Moving Average</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/Exponential-Moving-Average.html">Exponential Moving Average</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/Filtering-in-MATLAB.html">Filtering in MATLAB</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/C++Implementation.html">C++ Implementation</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/index.html">Simple Moving Average</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/Simple-Moving-Average.html">Simple Moving Average</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/C++Implementation.html">C++ Implementation</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/index.html">Discretization</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/Bilinear-transform.html">Bilinear Transform</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/Discretization-of-a-fourth-order-Butterworth-filter.html">Discretization of a Fourth-Order Butterworth Filter</a></li>
                </ul>
                </li>
                <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/FIR-Notch.html">Simple Finite Impulse Response Notch Filter</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/index.html">Programming</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/Cpp/index.html">C++</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/Cpp/Algorithms/index.html">Algorithms</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Programming/Cpp/Algorithms/Max_n_elements.html">Maximum N elements</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Ubuntu/index.html">Ubuntu</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Ubuntu/Software-Installation/index.html">Software Installation</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Ubuntu/Software-Installation/Arduino/index.html">Arduino</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Arduino/Arduino-IDE.html">Arduino IDE</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Arduino/Hairless-MIDI.html">The Hairless MIDI to Serial Bridge</a></li>
            </ul>
            </li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Installing-Locally.html">Installing Locally</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/BlueZ.html">BlueZ with MIDI over BLE Support</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Doxygen.html">Doxygen</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Eclipse.html">Eclipse</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Eigen3.html">Eigen</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/GoogleTest.html">GoogleTest</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Java.html">Java</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Python.html">Python</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/VirtualBox.html">VirtualBox</a></li>
        </ul>
        </li>
    </ul>
    </li>
</ul>

            <i class="material-icons">
                <a href="/" title="Home">home</a>
            </i>
            <i class="material-icons">
                <a href="Building-The-Toolchain.pdf" title="Download as PDF">get_app</a>
            </i>
            <!-- <i class="material-icons">
                <a href="javascript:window.print()" title="Print this article" onclick="window.print(); return false;">print</a>
            </i> -->
            <i class="material-icons">
                <a href="https://github.com/tttapa/tttapa.github.io/issues/new" target="_blank" title="Comment or open an issue">feedback</a>
            </i>
        </div>
    </nav>
    <article>
        <h1 class="title">Building the Cross-Compilation Toolchain</h1>
        <i class="author">Pieter P</i>
        <div class="main-content">
<div class="toc" id="toc">
  <script>
  function updateTocSize() {
    let toc = document.getElementById("toc");
    toc.style.maxHeight = toc.scrollHeight + 'px';
  }
  </script>  <h4 class="toc" onclick="if (this.parentElement.classList.toggle('expanded')) {updateTocSize();window.addEventListener('resize', updateTocSize);} else {this.parentElement.style = undefined;window.removeEventListener('resize', updateTocSize);}">Table of Contents <i class="material-icons">list</i></h4>
  <ul>
          <ul>
            <li><a href="#docker">Docker</a></li>
              <ul>
                <li><a href="#dockerfiles">Dockerfiles</a></li>
              </ul>
            <li><a href="#pulling-the-toolchain-from-docker-hub">Pulling the toolchain from Docker Hub</a></li>
            <li><a href="#building-the-toolchain-using-the-provided-shell-scripts">Building the toolchain using the provided shell scripts</a></li>
              <ul>
                <li><a href="#deleting-the-toolchains">Deleting the toolchains</a></li>
              </ul>
          </ul>
        <li><a href="#detailed-information-about-configuring-and-building-toolchains">Detailed information about configuring and building toolchains</a></li>
          <ul>
            <li><a href="#crosstool-ng">Crosstool-NG</a></li>
            <li><a href="#cross-compilation-toolchain">Cross-Compilation Toolchain</a></li>
              <ul>
                <li><a href="#raspberry-pi-3-64-bit-aarch64">Raspberry Pi 3, 64-bit (AArch64)</a></li>
                <li><a href="#raspberry-pi-3-32-bit-armv8">Raspberry Pi 3, 32-bit (ARMv8)</a></li>
                <li><a href="#raspberry-pi-1-zero-32-bit-armv6">Raspberry Pi 1 &amp; Zero, 32-bit (ARMv6)</a></li>
              </ul>
            <li><a href="#native-toolchain">Native toolchain</a></li>
            <li><a href="#customizing-the-toolchain">Customizing the toolchain</a></li>
            </ul>
  </ul></div>


<p>
    To compile software for the Raspberry Pi, you need a cross-compilation toolchain. It's a collection of files and
    programs that you can run on your computer, and that produce a binary that can be executed on the Raspberry Pi.
</p>
<p>
    If you want to do development on the Pi itself, you'll need a native toolchain as well. This is a toolchain that
    runs on the Pi, and produces binaries for the Pi.
</p>

<h3><a name="docker" href="#docker">Docker</a></h3>

<p>
    As explained on the previous page, building the toolchain happens inside of a Docker container.
    This allows you to experiment in a sandbox-like environment. Starting from scratch is really easy, and
    you don't have to worry about messing up your main Linux installation.
</p>
<p>
    You can compare a Docker container with a virtual machine, but without the virtualization. Programs that run
    inside of the container use the same kernel as your main Linux OS, and there's almost no performance overhead.
</p>
<p>
    It's very easy to share Docker images, so you don't have to build everything from scratch yourself, you can just
    pull it from Docker Hub.
</p>

<h4><a name="dockerfiles" href="#dockerfiles">Dockerfiles</a></h4>

<p>
    A Dockerfile describes how the Docker image is built. In this project, we'll start from a standard Ubuntu
    image, install some build tools, and then compile the toolchain and the dependencies.
    Each step of the build process creates a new layer in the image. This is handy, because it means that if a build
    fails in one of the last steps, you can just fix it in your Dockerfile, and build it again. It'll then start from
    the last layer that was successfully built before, you don't have to start from the beginning (which would take a
    while, since we'll be building many large projects.)
</p>
<p>
    The actual Dockerfiles used for the build can be found <a
        href="https://github.com/tttapa/RPi-Cpp-Toolchain/tree/master/toolchain">on my GitHub</a>, I'll briefly go over
    them on this page.
</p>

<h3><a name="pulling-the-toolchain-from-docker-hub" href="#pulling-the-toolchain-from-docker-hub">Pulling the toolchain from Docker Hub</a></h3>

<p>
    If you just want to use the toolchain, without understanding how it works,
    and without changing anything to the configuration, you can just pull the
    toolchains I built from Docker Hub.
</p>
<p>
    To pull and export the toolchain, you can use:
</p>

<pre class="console">
<code>./toolchain/toolchain.sh &lt;board&gt; --export-toolchain</code>
</pre>
<p>
    Where <code>&lt;board&gt;</code> is one of the following:
<ul>
    <li><code>rpi</code>: Raspberry Pi 1 or Zero, cross-compilation toolchain</li>
    <li><code>rpi-dev</code>: Raspberry Pi 1 or Zero, cross-compilation toolchain and native toolchain</li>
    <li><code>rpi3-armv8</code>: Raspberry Pi 3, 32-bit, cross-compilation toolchain</li>
    <li><code>rpi3-armv8-dev</code>: Raspberry Pi 3, 32-bit, cross-compilation toolchain and native toolchain</li>
    <li><code>rpi3-aarch64</code>: Raspberry Pi 3, 64-bit, cross-compilation toolchain</li>
    <li><code>rpi3-aarch64-dev</code>: Raspberry Pi 3, 64-bit, cross-compilation toolchain and native toolchain</li>
</ul>
</p>
<p>
    Alternatively, you can download the toolchains from <a
        href="https://github.com/tttapa/docker-arm-cross-toolchain">https://github.com/tttapa/docker-arm-cross-toolchain</a>.
</p>

<h3><a name="building-the-toolchain-using-the-provided-shell-scripts" href="#building-the-toolchain-using-the-provided-shell-scripts">Building the toolchain using the provided shell scripts</a></h3>

<p>
    Instead of pulling from Docker Hub, you can build the toolchain locally
    instead. I would only recommend this if you made changes to the toolchain
    configuration files, or if you have a really fast computer with a slow
    internet connection.
</p>
<p>
    Building one toolchain took around 25 minutes on a 2018 Dell XPS i7-8750H, and 40 minutes on a 2017 Dell XPS
    i7-7700HQ.
</p>
<pre class="console">
<code>./toolchain/toolchain.sh &lt;board&gt; --build-toolchain --export-toolchain</code>
</pre>
<p>
    The cross-compilation toolchain will be located in
    <code>toolchain/x-tools/&lt;arch&gt;-rpi*-linux-&lt;abi&gt;</code>,
    and the native toolchain will be in
    <code>toolchain/x-tools/HOST-&lt;arch&gt;-linux-&lt;abi&gt;/&lt;arch&gt;-rpi*-linux-&lt;abi&gt;</code>.
</p>

<h4><a name="deleting-the-toolchains" href="#deleting-the-toolchains">Deleting the toolchains</a></h4>

<p>
    The toolchains are read-only, to prevent you from accidentally breaking them during a build. If you try to delete
    them using the usual methods, you'll
    get <code>Permission denied</code>. The solution is to make them writable first, using <code>chmod</code>.
</p>
<p>
    The <code>toolchain/clean.sh</code> script will do this for you, and deletes all toolchains in the
    <code>toolchain</code> folder:
</p>

<pre class="console">
<code>./toolchain/clean.sh</code>
</pre>
<p>
    The toolchains will still be available in the Docker images used to build them. This means that next time you run
    the <code>build-and-export-toolchain.sh</code> script, it will finish in just a couple of seconds, as it just has
    to export the toolchain, it doesn't build it from scratch.
</p>
<p>
    If you want to delete these Docker images as well (to save disk space, for instance), you can use
    <code>docker image ls</code> to inspect all images on your system, and then you can delete them using
    <code>docker image rm &lt;image&gt;</code>.
</p>

<h2><a name="detailed-information-about-configuring-and-building-toolchains" href="#detailed-information-about-configuring-and-building-toolchains">Detailed information about configuring and building toolchains</a></h2>

<p>
    As mentioned before, you don't need to read or understand the sections below if you just want to use the
    toolchain.<br>
    If you're interested in how the toolchains are actually configured and built, or if you want to customize the
    configuration, you'll find the necessary information below.
</p>

<h3><a name="crosstool-ng" href="#crosstool-ng">Crosstool-NG</a></h3>

<p>
    The toolchain is built using <a href="https://github.com/crosstool-ng/crosstool-ng">Crosstool-NG</a>.
</p>
<!-- <p>
    It is installed in a CentOS 7 Docker container, because CentOS 7 was the oldest OS that I had to run the toolchain
    on. In this context, oldest refers to the Linux kernel version and the glibc version. They are backwards compatible,
    so you can run software compiled for an old version on a computer with a newer version, but you can't run software
    compiled for a new version on a computer with an older version.
</p> -->
<p>
    The following Dockerfile downloads, builds and installs Crosstool-NG to the <code>~/.local</code> directory
    of the container.
</p>
<h4 class="snippet-name"><a name="dockerfile" href="#dockerfile">Dockerfile</a></h4>
<div class="codesnippet"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.pygments157 .hll { background-color: #ffffcc }
.pygments157 { background: #ffffff; }
.pygments157 .c { color: #008000 } /* Comment */
.pygments157 .err { border: 1px solid #FF0000 } /* Error */
.pygments157 .k { color: #0000ff } /* Keyword */
.pygments157 .l { color: #0000FF } /* Literal */
.pygments157 .ch { color: #008000 } /* Comment.Hashbang */
.pygments157 .cm { color: #008000 } /* Comment.Multiline */
.pygments157 .cp { color: #af00db } /* Comment.Preproc */
.pygments157 .cpf { color: #a31515 } /* Comment.PreprocFile */
.pygments157 .c1 { color: #008000 } /* Comment.Single */
.pygments157 .cs { color: #008000 } /* Comment.Special */
.pygments157 .ge { font-style: italic } /* Generic.Emph */
.pygments157 .gh { font-weight: bold } /* Generic.Heading */
.pygments157 .gp { font-weight: bold } /* Generic.Prompt */
.pygments157 .gs { font-weight: bold } /* Generic.Strong */
.pygments157 .gu { font-weight: bold } /* Generic.Subheading */
.pygments157 .kc { color: #4e8ae9 } /* Keyword.Constant */
.pygments157 .kd { color: #0000ff } /* Keyword.Declaration */
.pygments157 .kn { color: #af00db } /* Keyword.Namespace */
.pygments157 .kp { color: #0000ff } /* Keyword.Pseudo */
.pygments157 .kr { color: #0000ff } /* Keyword.Reserved */
.pygments157 .kt { color: #2b91af } /* Keyword.Type */
.pygments157 .ld { color: #0000FF } /* Literal.Date */
.pygments157 .m { color: #0000FF } /* Literal.Number */
.pygments157 .s { color: #a31515 } /* Literal.String */
.pygments157 .na { color: #001080 } /* Name.Attribute */
.pygments157 .nb { color: #795e26 } /* Name.Builtin */
.pygments157 .nc { color: #2b91af } /* Name.Class */
.pygments157 .no { color: #0000FF } /* Name.Constant */
.pygments157 .nf { color: #795e26 } /* Name.Function */
.pygments157 .nl { color: #AF00DB } /* Name.Label */
.pygments157 .nn { color: #000000 } /* Name.Namespace */
.pygments157 .nt { color: #800000 } /* Name.Tag */
.pygments157 .nv { color: #0F1E87 } /* Name.Variable */
.pygments157 .ow { color: #0000ff } /* Operator.Word */
.pygments157 .mb { color: #09885a } /* Literal.Number.Bin */
.pygments157 .mf { color: #09885a } /* Literal.Number.Float */
.pygments157 .mh { color: #09885a } /* Literal.Number.Hex */
.pygments157 .mi { color: #09885a } /* Literal.Number.Integer */
.pygments157 .mo { color: #09885a } /* Literal.Number.Oct */
.pygments157 .sa { color: #a31515 } /* Literal.String.Affix */
.pygments157 .sb { color: #a31515 } /* Literal.String.Backtick */
.pygments157 .sc { color: #a31515 } /* Literal.String.Char */
.pygments157 .dl { color: #a31515 } /* Literal.String.Delimiter */
.pygments157 .sd { color: #a31515 } /* Literal.String.Doc */
.pygments157 .s2 { color: #a31515 } /* Literal.String.Double */
.pygments157 .se { color: #a31515 } /* Literal.String.Escape */
.pygments157 .sh { color: #a31515 } /* Literal.String.Heredoc */
.pygments157 .si { color: #a31515 } /* Literal.String.Interpol */
.pygments157 .sx { color: #a31515 } /* Literal.String.Other */
.pygments157 .sr { color: #a31515 } /* Literal.String.Regex */
.pygments157 .s1 { color: #a31515 } /* Literal.String.Single */
.pygments157 .ss { color: #a31515 } /* Literal.String.Symbol */
.pygments157 .bp { color: #795e26 } /* Name.Builtin.Pseudo */
.pygments157 .fm { color: #795e26 } /* Name.Function.Magic */
.pygments157 .vc { color: #0F1E87 } /* Name.Variable.Class */
.pygments157 .vg { color: #0F1E87 } /* Name.Variable.Global */
.pygments157 .vi { color: #0F1E87 } /* Name.Variable.Instance */
.pygments157 .vm { color: #0F1E87 } /* Name.Variable.Magic */
.pygments157 .il { color: #09885a } /* Literal.Number.Integer.Long */
.pygments157 pre.snippet157 { counter-reset: line 0; }</style>
<a href="https://github.com/tttapa/RPi-Cpp-Toolchain/blob/c91cd4a50c91e06b353a33ff13597a08c7d35fcd/toolchain/docker/crosstool-ng-master/Dockerfile" title="Open on GitHub"><img class="github-mark" src="/Images/GitHub-Mark.svg"/></a>
<div class="pygments157"><pre class="lineNumbers snippet157"><code><span></span><span class="k">FROM</span> <span class="s">ubuntu:focal</span> <span class="k">as</span> <span class="s">ct-ng</span></code>
<code></code>
<code><span class="c"># Install dependencies to build toolchain</span></code>
<code><span class="k">ENV</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive</code>
<code><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    apt-get install -y gcc g++ gperf bison flex texinfo help2man make libncurses5-dev unzip <span class="se">\</span></code>
<code>                       python3-dev autoconf automake libtool libtool-bin gawk wget rsync git <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    apt-get clean autoclean <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    apt-get autoremove -y <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    rm -rf /var/lib/apt/lists/*</code>
<code></code>
<code><span class="c"># Add a user called `develop` and add him to the sudo group</span></code>
<code><span class="k">RUN</span> useradd -m develop <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    <span class="nb">echo</span> <span class="s2">&quot;develop:develop&quot;</span> <span class="p">|</span> chpasswd <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    adduser develop sudo</code>
<code></code>
<code><span class="k">USER</span><span class="s"> develop</span></code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop</span></code>
<code></code>
<code><span class="k">RUN</span> wget https://ftp.debian.org/debian/pool/main/b/binutils/binutils-source_2.31.1-16_all.deb <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    mkdir binutils <span class="o">&amp;&amp;</span> <span class="nb">cd</span> binutils <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    ar x ../binutils-source_2.31.1-16_all.deb <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    tar xf data.tar.xz <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    cp usr/src/binutils/patches/129_multiarch_libpath.patch /home/develop</code>
<code></code>
<code><span class="c"># Download and install the latest version of crosstool-ng</span></code>
<code><span class="k">RUN</span> git clone -b master --single-branch --depth <span class="m">1</span> <span class="se">\</span></code>
<code>        https://github.com/crosstool-ng/crosstool-ng.git</code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop/crosstool-ng</span></code>
<code><span class="k">RUN</span> git show --summary <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    ./bootstrap <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    ../configure --prefix<span class="o">=</span>/home/develop/.local <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    make -j<span class="k">$(($(</span>nproc<span class="k">)</span> <span class="o">*</span> <span class="m">2</span><span class="k">))</span> <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    make install <span class="o">&amp;&amp;</span>  <span class="se">\</span></code>
<code>    <span class="nb">cd</span> .. <span class="o">&amp;&amp;</span> rm -rf build</code>
<code><span class="k">ENV</span> <span class="nv">PATH</span><span class="o">=</span>/home/develop/.local/bin:<span class="nv">$PATH</span></code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop </span></code></pre></div>
</div>
<p>
    The list of dependencies can be found on Crosstool-NG's GitHub:
    <a href="https://github.com/crosstool-ng/crosstool-ng/blob/master/testing/docker/ubuntu19.10/Dockerfile">
        https://github.com/crosstool-ng/crosstool-ng/blob/master/testing/docker/ubuntu19.10/Dockerfile</a>
</p>

<h3><a name="cross-compilation-toolchain" href="#cross-compilation-toolchain">Cross-Compilation Toolchain</a></h3>

<p>
    The following Dockerfile builds the toolchain:
</p>
<h4 class="snippet-name"><a name="dockerfile1" href="#dockerfile1">Dockerfile</a></h4>
<div class="codesnippet"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.pygments172 .hll { background-color: #ffffcc }
.pygments172 { background: #ffffff; }
.pygments172 .c { color: #008000 } /* Comment */
.pygments172 .err { border: 1px solid #FF0000 } /* Error */
.pygments172 .k { color: #0000ff } /* Keyword */
.pygments172 .l { color: #0000FF } /* Literal */
.pygments172 .ch { color: #008000 } /* Comment.Hashbang */
.pygments172 .cm { color: #008000 } /* Comment.Multiline */
.pygments172 .cp { color: #af00db } /* Comment.Preproc */
.pygments172 .cpf { color: #a31515 } /* Comment.PreprocFile */
.pygments172 .c1 { color: #008000 } /* Comment.Single */
.pygments172 .cs { color: #008000 } /* Comment.Special */
.pygments172 .ge { font-style: italic } /* Generic.Emph */
.pygments172 .gh { font-weight: bold } /* Generic.Heading */
.pygments172 .gp { font-weight: bold } /* Generic.Prompt */
.pygments172 .gs { font-weight: bold } /* Generic.Strong */
.pygments172 .gu { font-weight: bold } /* Generic.Subheading */
.pygments172 .kc { color: #4e8ae9 } /* Keyword.Constant */
.pygments172 .kd { color: #0000ff } /* Keyword.Declaration */
.pygments172 .kn { color: #af00db } /* Keyword.Namespace */
.pygments172 .kp { color: #0000ff } /* Keyword.Pseudo */
.pygments172 .kr { color: #0000ff } /* Keyword.Reserved */
.pygments172 .kt { color: #2b91af } /* Keyword.Type */
.pygments172 .ld { color: #0000FF } /* Literal.Date */
.pygments172 .m { color: #0000FF } /* Literal.Number */
.pygments172 .s { color: #a31515 } /* Literal.String */
.pygments172 .na { color: #001080 } /* Name.Attribute */
.pygments172 .nb { color: #795e26 } /* Name.Builtin */
.pygments172 .nc { color: #2b91af } /* Name.Class */
.pygments172 .no { color: #0000FF } /* Name.Constant */
.pygments172 .nf { color: #795e26 } /* Name.Function */
.pygments172 .nl { color: #AF00DB } /* Name.Label */
.pygments172 .nn { color: #000000 } /* Name.Namespace */
.pygments172 .nt { color: #800000 } /* Name.Tag */
.pygments172 .nv { color: #0F1E87 } /* Name.Variable */
.pygments172 .ow { color: #0000ff } /* Operator.Word */
.pygments172 .mb { color: #09885a } /* Literal.Number.Bin */
.pygments172 .mf { color: #09885a } /* Literal.Number.Float */
.pygments172 .mh { color: #09885a } /* Literal.Number.Hex */
.pygments172 .mi { color: #09885a } /* Literal.Number.Integer */
.pygments172 .mo { color: #09885a } /* Literal.Number.Oct */
.pygments172 .sa { color: #a31515 } /* Literal.String.Affix */
.pygments172 .sb { color: #a31515 } /* Literal.String.Backtick */
.pygments172 .sc { color: #a31515 } /* Literal.String.Char */
.pygments172 .dl { color: #a31515 } /* Literal.String.Delimiter */
.pygments172 .sd { color: #a31515 } /* Literal.String.Doc */
.pygments172 .s2 { color: #a31515 } /* Literal.String.Double */
.pygments172 .se { color: #a31515 } /* Literal.String.Escape */
.pygments172 .sh { color: #a31515 } /* Literal.String.Heredoc */
.pygments172 .si { color: #a31515 } /* Literal.String.Interpol */
.pygments172 .sx { color: #a31515 } /* Literal.String.Other */
.pygments172 .sr { color: #a31515 } /* Literal.String.Regex */
.pygments172 .s1 { color: #a31515 } /* Literal.String.Single */
.pygments172 .ss { color: #a31515 } /* Literal.String.Symbol */
.pygments172 .bp { color: #795e26 } /* Name.Builtin.Pseudo */
.pygments172 .fm { color: #795e26 } /* Name.Function.Magic */
.pygments172 .vc { color: #0F1E87 } /* Name.Variable.Class */
.pygments172 .vg { color: #0F1E87 } /* Name.Variable.Global */
.pygments172 .vi { color: #0F1E87 } /* Name.Variable.Instance */
.pygments172 .vm { color: #0F1E87 } /* Name.Variable.Magic */
.pygments172 .il { color: #09885a } /* Literal.Number.Integer.Long */
.pygments172 pre.snippet172 { counter-reset: line 0; }</style>
<a href="https://github.com/tttapa/RPi-Cpp-Toolchain/blob/c91cd4a50c91e06b353a33ff13597a08c7d35fcd/toolchain/docker/merged/cross-toolchain/Dockerfile" title="Open on GitHub"><img class="github-mark" src="/Images/GitHub-Mark.svg"/></a>
<div class="pygments172"><pre class="lineNumbers snippet172"><code><span></span><span class="k">FROM</span> <span class="s">tttapa/crosstool-ng-master</span> <span class="k">as</span> <span class="s">cross-toolchain</span></code>
<code></code>
<code><span class="k">ARG</span> HOST_TRIPLE</code>
<code><span class="k">ARG</span> HOST_TRIPLE_LIB_DIR</code>
<code></code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop</span></code>
<code><span class="k">RUN</span> mkdir /home/develop/RPi <span class="o">&amp;&amp;</span> mkdir /home/develop/src</code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop/RPi</span></code>
<code><span class="k">COPY</span> <span class="si">${</span><span class="nv">HOST_TRIPLE</span><span class="si">}</span>.config .config</code>
<code><span class="k">RUN</span> mkdir -p patches/binutils/2.31.1 <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    cp /home/develop/129_multiarch_libpath.patch patches/binutils/2.31.1</code>
<code></code>
<code><span class="c"># https://www.raspberrypi.org/forums/viewtopic.php?f=91&amp;t=280707&amp;p=1700861#p1700861</span></code>
<code><span class="k">ENV</span> <span class="nv">DEB_TARGET_MULTIARCH</span><span class="o">=</span><span class="si">${</span><span class="nv">HOST_TRIPLE_LIB_DIR</span><span class="si">}</span></code>
<code><span class="k">RUN</span> ct-ng build <span class="o">||</span> <span class="o">{</span> cat build.log <span class="o">&amp;&amp;</span> false<span class="p">;</span> <span class="o">}</span> <span class="o">&amp;&amp;</span> rm -rf .build</code>
<code></code>
<code><span class="k">ENV</span> <span class="nv">TOOLCHAIN_PATH</span><span class="o">=</span>/home/develop/x-tools/<span class="si">${</span><span class="nv">HOST_TRIPLE</span><span class="si">}</span></code>
<code><span class="k">ENV</span> <span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">TOOLCHAIN_PATH</span><span class="si">}</span>/bin:<span class="nv">$PATH</span></code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop</span></code></pre></div>
</div>
<p>
    The different configuration files have names that contain the full <a
        href="https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.69/html_node/Specifying-Target-Triplets.html">target
        triplet</a>. They can be found in <a
        href="https://github.com/tttapa/RPi-Cpp-Toolchain/tree/master/toolchain/docker/merged/cross-toolchain">same
        folder</a> as the Dockerfile.
</p>

<h4><a name="raspberry-pi-3-64-bit-aarch64" href="#raspberry-pi-3-64-bit-aarch64">Raspberry Pi 3, 64-bit (AArch64)</a></h4>

<p>
    This configuration is based on the <code>aarch64-rpi3-linux-gnu</code> sample that comes with Crosstool-NG:
    <a href="https://github.com/crosstool-ng/crosstool-ng/tree/master/samples/aarch64-rpi3-linux-gnu">
        https://github.com/crosstool-ng/crosstool-ng/tree/master/samples/aarch64-rpi3-linux-gnu</a>
</p>
<p>
    I changed the GCC version to the latest stable one, and the Linux kernel and glibc versions to match the versions
    that the Ubuntu Server 18.04 image ships with.
</p>

<h4><a name="raspberry-pi-3-32-bit-armv8" href="#raspberry-pi-3-32-bit-armv8">Raspberry Pi 3, 32-bit (ARMv8)</a></h4>

<p>
    This configuration is based on the <code>armv8-rpi3-linux-gnueabihf</code> sample that comes with Crosstool-NG:
    <a href="https://github.com/crosstool-ng/crosstool-ng/tree/master/samples/armv8-rpi3-linux-gnueabihf">
        https://github.com/crosstool-ng/crosstool-ng/tree/master/samples/armv8-rpi3-linux-gnueabihf</a>
</p>
<p>
    Even though the CPU will be running in 32-bit mode, you can still use the ARMv8 NEON instructions, so I changed the
    compiler's default FPU flag to <code>neon-fp-armv8</code>. I haven't tested if it actually makes any difference.
</p>
<p>
    I changed the GCC version to the latest stable one, and the Linux kernel and glibc versions to match the versions
    that the Ubuntu Server 18.04 image ships with. These are also supported on Raspbian Buster.
</p>

<h4><a name="raspberry-pi-1-zero-32-bit-armv6" href="#raspberry-pi-1-zero-32-bit-armv6">Raspberry Pi 1 &amp; Zero, 32-bit (ARMv6)</a></h4>

<p>
    This configuration is based on the <code>armv6-rpi-linux-gnueabihf</code> sample that comes with Crosstool-NG:
    <a href="https://github.com/crosstool-ng/crosstool-ng/tree/master/samples/armv6-rpi-linux-gnueabi">
        https://github.com/crosstool-ng/crosstool-ng/tree/master/samples/armv6-rpi-linux-gnueabi</a>
</p>

<h3><a name="native-toolchain" href="#native-toolchain">Native toolchain</a></h3>

<p>
    Building the native toolchain for the Raspberry Pi is very similar.
</p>
<h4 class="snippet-name"><a name="dockerfile2" href="#dockerfile2">Dockerfile</a></h4>
<div class="codesnippet"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.pygments225 .hll { background-color: #ffffcc }
.pygments225 { background: #ffffff; }
.pygments225 .c { color: #008000 } /* Comment */
.pygments225 .err { border: 1px solid #FF0000 } /* Error */
.pygments225 .k { color: #0000ff } /* Keyword */
.pygments225 .l { color: #0000FF } /* Literal */
.pygments225 .ch { color: #008000 } /* Comment.Hashbang */
.pygments225 .cm { color: #008000 } /* Comment.Multiline */
.pygments225 .cp { color: #af00db } /* Comment.Preproc */
.pygments225 .cpf { color: #a31515 } /* Comment.PreprocFile */
.pygments225 .c1 { color: #008000 } /* Comment.Single */
.pygments225 .cs { color: #008000 } /* Comment.Special */
.pygments225 .ge { font-style: italic } /* Generic.Emph */
.pygments225 .gh { font-weight: bold } /* Generic.Heading */
.pygments225 .gp { font-weight: bold } /* Generic.Prompt */
.pygments225 .gs { font-weight: bold } /* Generic.Strong */
.pygments225 .gu { font-weight: bold } /* Generic.Subheading */
.pygments225 .kc { color: #4e8ae9 } /* Keyword.Constant */
.pygments225 .kd { color: #0000ff } /* Keyword.Declaration */
.pygments225 .kn { color: #af00db } /* Keyword.Namespace */
.pygments225 .kp { color: #0000ff } /* Keyword.Pseudo */
.pygments225 .kr { color: #0000ff } /* Keyword.Reserved */
.pygments225 .kt { color: #2b91af } /* Keyword.Type */
.pygments225 .ld { color: #0000FF } /* Literal.Date */
.pygments225 .m { color: #0000FF } /* Literal.Number */
.pygments225 .s { color: #a31515 } /* Literal.String */
.pygments225 .na { color: #001080 } /* Name.Attribute */
.pygments225 .nb { color: #795e26 } /* Name.Builtin */
.pygments225 .nc { color: #2b91af } /* Name.Class */
.pygments225 .no { color: #0000FF } /* Name.Constant */
.pygments225 .nf { color: #795e26 } /* Name.Function */
.pygments225 .nl { color: #AF00DB } /* Name.Label */
.pygments225 .nn { color: #000000 } /* Name.Namespace */
.pygments225 .nt { color: #800000 } /* Name.Tag */
.pygments225 .nv { color: #0F1E87 } /* Name.Variable */
.pygments225 .ow { color: #0000ff } /* Operator.Word */
.pygments225 .mb { color: #09885a } /* Literal.Number.Bin */
.pygments225 .mf { color: #09885a } /* Literal.Number.Float */
.pygments225 .mh { color: #09885a } /* Literal.Number.Hex */
.pygments225 .mi { color: #09885a } /* Literal.Number.Integer */
.pygments225 .mo { color: #09885a } /* Literal.Number.Oct */
.pygments225 .sa { color: #a31515 } /* Literal.String.Affix */
.pygments225 .sb { color: #a31515 } /* Literal.String.Backtick */
.pygments225 .sc { color: #a31515 } /* Literal.String.Char */
.pygments225 .dl { color: #a31515 } /* Literal.String.Delimiter */
.pygments225 .sd { color: #a31515 } /* Literal.String.Doc */
.pygments225 .s2 { color: #a31515 } /* Literal.String.Double */
.pygments225 .se { color: #a31515 } /* Literal.String.Escape */
.pygments225 .sh { color: #a31515 } /* Literal.String.Heredoc */
.pygments225 .si { color: #a31515 } /* Literal.String.Interpol */
.pygments225 .sx { color: #a31515 } /* Literal.String.Other */
.pygments225 .sr { color: #a31515 } /* Literal.String.Regex */
.pygments225 .s1 { color: #a31515 } /* Literal.String.Single */
.pygments225 .ss { color: #a31515 } /* Literal.String.Symbol */
.pygments225 .bp { color: #795e26 } /* Name.Builtin.Pseudo */
.pygments225 .fm { color: #795e26 } /* Name.Function.Magic */
.pygments225 .vc { color: #0F1E87 } /* Name.Variable.Class */
.pygments225 .vg { color: #0F1E87 } /* Name.Variable.Global */
.pygments225 .vi { color: #0F1E87 } /* Name.Variable.Instance */
.pygments225 .vm { color: #0F1E87 } /* Name.Variable.Magic */
.pygments225 .il { color: #09885a } /* Literal.Number.Integer.Long */
.pygments225 pre.snippet225 { counter-reset: line 0; }</style>
<a href="https://github.com/tttapa/RPi-Cpp-Toolchain/blob/1b0f6176d98a3d02a5f304b51ca37cbf6231ce6d/toolchain/docker/merged/cross-native-toolchain/Dockerfile" title="Open on GitHub"><img class="github-mark" src="/Images/GitHub-Mark.svg"/></a>
<div class="pygments225"><pre class="lineNumbers snippet225"><code><span></span><span class="k">FROM</span> <span class="s">tttapa/crosstool-ng-master</span> <span class="k">as</span> <span class="s">cross-native-toolchain</span></code>
<code></code>
<code><span class="k">ARG</span> HOST_TRIPLE</code>
<code><span class="k">ARG</span> HOST_TRIPLE_LIB_DIR</code>
<code></code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop</span></code>
<code><span class="k">RUN</span> mkdir /home/develop/RPi <span class="o">&amp;&amp;</span> mkdir /home/develop/src</code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop/RPi</span></code>
<code><span class="k">COPY</span> <span class="si">${</span><span class="nv">HOST_TRIPLE</span><span class="si">}</span>.config .config</code>
<code><span class="k">RUN</span> mkdir -p patches/binutils/2.31.1 <span class="o">&amp;&amp;</span> <span class="se">\</span></code>
<code>    cp /home/develop/129_multiarch_libpath.patch <span class="nv">$_</span></code>
<code></code>
<code><span class="c"># https://www.raspberrypi.org/forums/viewtopic.php?f=91&amp;t=280707&amp;p=1700861#p1700861</span></code>
<code><span class="k">ENV</span> <span class="nv">DEB_TARGET_MULTIARCH</span><span class="o">=</span><span class="si">${</span><span class="nv">HOST_TRIPLE_LIB_DIR</span><span class="si">}</span></code>
<code><span class="k">RUN</span> ct-ng build <span class="o">||</span> <span class="o">{</span> cat build.log <span class="o">&amp;&amp;</span> false<span class="p">;</span> <span class="o">}</span> <span class="o">&amp;&amp;</span> rm -rf .build</code>
<code></code>
<code><span class="k">WORKDIR</span><span class="s"> /home/develop</span></code></pre></div>
</div>

<p>
    The toolchain type is "Cross-Native", and is implemented as a special case
    of the "Canadian Cross" toolchain.
    It uses the cross-compilation toolchain that was built earlier.
    More information can be found in the <a href="https://crosstool-ng.github.io/docs/toolchain-types/">Crosstool-NG
        documentation</a>.
</p>

<h3><a name="customizing-the-toolchain" href="#customizing-the-toolchain">Customizing the toolchain</a></h3>

<p>
    You can customize all previously mentioned toolchains by running <code>ct-ng menuconfig</code> on the corresponding
    configuration file.
    The easiest way to do this is by running it inside of the <code>crosstool-ng-master</code> Docker container.
</p>

<pre class="console">
<code>cd RPi-Cpp-Toolchain/</code>
<code>./toolchain/docker/crosstool-ng-master/build.sh</code>
<code>docker run -it --rm --volume "$PWD/toolchain/docker:/mnt" tttapa/crosstool-ng-master</code>
</pre>
<pre class="console-docker">
<code>cd /mnt/merged/cross-toolchain/</code>
<code>cp aarch64-rpi3-linux-gnu.config .config  # Choose RPi model and architecture</code>
<code>ct-ng menuconfig</code>
</pre>
<p>
    Now make your changes and save the result to <code>.config</code>.
</p>
<pre class="console-docker">
<code># Rename the old configuration</code>
<code>mv aarch64-rpi3-linux-gnu.config aarch64-rpi3-linux-gnu.config.old</code>
<code># Replace with new configuration</code>
<code>mv .config aarch64-rpi3-linux-gnu.config</code>
<code>exit</code>
</pre>

<p>
    Now you can build the toolchain again using the <code>./toolchain.sh</code> script, as explained
    earlier:
</p>
<pre class="console">
<code>./toolchain/toolchain.sh &lt;board&gt; --build-toolchain --export-toolchain</code>
</pre>

</div>
        <hr id="end-of-article">
        <div class="nextupprev"><div class="prevpage"><a href="Installation.html" title="Installation and setup"><i class="material-icons" style="vertical-align: middle; text-decoration: none">chevron_left </i>Previous Page</a></div><div class="uppage"><a href="index.html" title="C++ Development using Docker">Index</a></div><div class="nextpage"><a href="Dependencies.html" title="Cross-Compiling the Dependencies">Next Page<i class="material-icons" style="vertical-align: middle; text-decoration: none"> chevron_right</i></a></div></div>
    </article>
    <footer>Last edited: Sunday, 20 February 2022 17:14 UTC</footer>
</body>

</html>
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="author" content="Pieter P"/>
    <link rel="stylesheet" type="text/css" href="/CSS/Pages.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- No MathJax -->
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
    <meta name="theme-color" content="#ccc"/>
    <meta name="keywords" content="cross-compile,raspberry,raspberry pi,installation,raspbian, raspberry pi os"/>
    <meta name="description" content="Cross-compiling a C++ project using CMake and with a dependency on the Boost libraries, as an example of how to build any C++ project with nontrivial dependencies."/>
    <title>Building the C++ example project</title>
</head>
<body>
    <nav>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" style="position:absolute;top:4px;right: 4px;">
                <path d="M0 0h48v48h-48z" fill="none"/>
                <path d="M6 36h36v-4h-36v4zm0-10h36v-4h-36v4zm0-14v4h36v-4h-36z"/>
            </svg>
            <h2><a href="/Pages">Pages</a></h2>
<ul>
    <li class="expanded"><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../index.html">Raspberry Pi</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../Installation+Setup/index.html">Installation and Setup</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../Installation+Setup/Setting-up-Ubuntu.html">Installing and Setting up Ubuntu</a></li>
            <li><span class="ftriangle"></span><a class="" href="../Installation+Setup/WiFi-Setup.html">Setting up the WiFi Connection</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../Python-Development/index.html">Python Development</a>
        <ul>
        </ul>
        </li>
        <li class="expanded"><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="index.html">Ubuntu to Raspberry Pi OS Cross C++ Development</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="Installation.html">Installation and Setup</a></li>
            <li><span class="ftriangle"></span><a class="" href="Development-setup.html">Development setup</a></li>
            <li><span class="ftriangle"></span><a class="openEntry " href="Building-example-project.html">Building the C++ example project</a></li>
            <li><span class="ftriangle"></span><a class="" href="Debugging.html">Remote debugging</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../C++-Development-Ubuntu/index.html">Ubuntu to Ubuntu Cross C++ Development</a>
        <ul>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../C++-Development/index.html">C++ Development using Docker</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development/Installation.html">Installation and setup</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development/Building-The-Toolchain.html">Building the Cross-Compilation Toolchain</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development/Dependencies.html">Cross-Compiling the Dependencies</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development/Installing-Dependencies.html">Installing the dependencies on the Pi</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development/Cpp-Program.html">Cross-Compiling the C++ Example Project</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development/Debugging.html">Debugging</a></li>
            <li><span class="ftriangle"></span><a class="" href="../C++-Development/Speedrun.html">Speedrun</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../NEON/index.html">NEON</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../NEON/Division.html">Division</a></li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/index.html">Arduino</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/index.html">Audio and Signal Processing</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/VU-Meters/index.html">VU Meters</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/VU-Meters/Model.html">Model of a moving-coil galvanometer</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Audio-and-Signal-Processing/VU-Meters/Damped-Harmonic-Oscillator.html">The Damped Harmonic Oscillator</a></li>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Surface/index.html">Control Surface</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Surface/Developers/index.html">Developers</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Installation.html">Installation</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Style.html">Style</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Tests.html">Tests</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Surface/Developers/Generating-Documentation.html">Generating Documentation</a></li>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Theory/index.html">Control Theory</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/index.html">Motorized Faders</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/PID-Controllers.html">PID Controllers</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/PID-Cpp-Implementation.html">C++ Implementation</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/PID-Tuning.html">PID Tuning</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/Architecture.html">Architecture and Design Decisions</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/Hardware.html">Hardware</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/Configuration.html">Configuration options and common use cases</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/Control-Theory/Motor-Fader/ATmega328P-Code.html">ATmega328P Code</a></li>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/Bootloaders/index.html">Bootloaders</a>
        <ul>
            <li><span class="ftriangle"></span><a class="" href="../../Arduino/Bootloaders/ATmega328P-custom-frequency.html">Compiling Optiboot - ATmega328P at custom frequency</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/ESP8266/index.html">ESP8266</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Arduino/ESP8266/Flashing/index.html">Flashing</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Arduino/ESP8266/Flashing/Flashing-With-an-Arduino.html">Flashing the ESP8266 with an Arduino UNO</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/index.html">Mathematics &amp; Engineering</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/index.html">Systems and Control Theory</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Analog-Filters/index.html">Analog Filters &amp; Systems</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Analog-Filters/Butterworth-Filters.html">Butterworth Filters</a></li>
            </ul>
            </li>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/index.html">Digital Filters &amp; Systems</a>
            <ul>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/index.html">DTLTI Systems, Transfer Functions, and the Z-transform</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/DTLTI-Systems.html">DTLTI Systems</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/Impulse-and-Step-Response.html">Impulse and Step Response</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/Convolutions.html">Convolutions</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/The-Z-transform.html">The Z-transform</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/index.html">Exponential Moving Average</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/Exponential-Moving-Average.html">Exponential Moving Average</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/Filtering-in-MATLAB.html">Filtering in MATLAB</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/C++Implementation.html">C++ Implementation</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/index.html">Simple Moving Average</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/Simple-Moving-Average.html">Simple Moving Average</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/C++Implementation.html">C++ Implementation</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/index.html">Discretization</a>
                <ul>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/Bilinear-transform.html">Bilinear Transform</a></li>
                    <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/Discretization-of-a-fourth-order-Butterworth-filter.html">Discretization of a Fourth-Order Butterworth Filter</a></li>
                </ul>
                </li>
                <li><span class="ftriangle"></span><a class="" href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/FIR-Notch.html">Simple Finite Impulse Response Notch Filter</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/index.html">Programming</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/Snippets/index.html">Snippets</a>
        <ul>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/Cpp/index.html">C++</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/Cpp/Practices/index.html">Best Practices</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Programming/Cpp/Practices/type-punning.html">Don't use unions or pointer casts for type punning</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Programming/Cpp/Practices/c-style-casts.html">Don't use C-style casts</a></li>
            </ul>
            </li>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Programming/Cpp/Algorithms/index.html">Algorithms</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Programming/Cpp/Algorithms/Max_n_elements.html">Maximum N elements</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Ubuntu/index.html">Ubuntu</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Ubuntu/Software-Installation/index.html">Software Installation</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a class="" href="../../Ubuntu/Software-Installation/Arduino/index.html">Arduino</a>
            <ul>
                <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Arduino/Arduino-IDE.html">Arduino IDE</a></li>
                <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Arduino/Hairless-MIDI.html">The Hairless MIDI to Serial Bridge</a></li>
            </ul>
            </li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Installing-Locally.html">Installing Locally</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/BlueZ.html">BlueZ with MIDI over BLE Support</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Doxygen.html">Doxygen</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Eclipse.html">Eclipse</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Eigen3.html">Eigen</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/GoogleTest.html">GoogleTest</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Java.html">Java</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/Python.html">Python</a></li>
            <li><span class="ftriangle"></span><a class="" href="../../Ubuntu/Software-Installation/VirtualBox.html">VirtualBox</a></li>
        </ul>
        </li>
    </ul>
    </li>
</ul>

            <i class="material-icons">
                <a href="/" title="Home">home</a>
            </i>
            <i class="material-icons">
                <a href="Building-example-project.pdf" title="Download as PDF">get_app</a>
            </i>
            <!-- <i class="material-icons">
                <a href="javascript:window.print()" title="Print this article" onclick="window.print(); return false;">print</a>
            </i> -->
            <i class="material-icons">
                <a href="https://github.com/tttapa/tttapa.github.io/issues/new" target="_blank" title="Comment or open an issue">feedback</a>
            </i>
        </div>
    </nav>
    <article>
        <h1 class="title">Building the C++ example project</h1>
        <i class="author">Pieter P</i>
        <div class="main-content">
<div class="toc" id="toc">
  <script>
  function updateTocSize() {
    let toc = document.getElementById("toc");
    toc.style.maxHeight = toc.scrollHeight + 'px';
  }
  </script>  <h4 class="toc" onclick="if (this.parentElement.classList.toggle('expanded')) {updateTocSize();window.addEventListener('resize', updateTocSize);} else {this.parentElement.style = undefined;window.removeEventListener('resize', updateTocSize);}">Table of Contents <i class="material-icons">list</i></h4>
  <ul>
            <li><a href="#downloading-the-example-project">Downloading the example project</a></li>
            <li><a href="#customize-the-paths">Customize the paths</a></li>
            <li><a href="#installing-the-dependencies">Installing the dependencies</a></li>
            <li><a href="#configuring-and-building-the-project">Configuring and building the project</a></li>
            <li><a href="#running-the-example-program-on-the-raspberry-pi">Running the example program on the Raspberry Pi</a></li>
            <li><a href="#using-a-staging-directory">Using a staging directory</a></li>
            <li><a href="#a-closer-look-at-the-build-process">A closer look at the build process</a></li>
            <li><a href="#manual-build">Manual build</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
              <ul>
                <li><a href="#compiler-not-found">Compiler not found</a></li>
                <li><a href="#compiler-is-not-able-to-compile-a-simple-test-program">Compiler is not able to compile a simple test program</a></li>
                <li><a href="#boost-not-found">Boost not found</a></li>
                </ul>
  </ul></div>


<style>
    div.img-wrapper img {
        box-shadow: #666 1px 1px 4px;
        border-radius: 3px;
    }
</style>

<h3><a name="downloading-the-example-project" href="#downloading-the-example-project">Downloading the example project</a></h3>

<p>
    The example is just a command line program that asks the user for his/her
    name using <a href="https://www.boost.org/doc/libs/1_76_0/doc/html/program_options.html">Boost.program_options</a>
    and prints a <i>hello world</i> message.<br>
    Download it from GitHub:
</p>
<pre class="console"><code>mkdir -p ~/GitHub</code>
<code>cd ~/GitHub</code>
<code>git clone https://github.com/tttapa/RPi-Cross-Cpp-Development.git</code>
<code>cd RPi-Cross-Cpp-Development</code></pre>

<h3><a name="customize-the-paths" href="#customize-the-paths">Customize the paths</a></h3>

<p>
    Edit the CMake toolchain file to point to the correct root filesystem path
    (the value of the <code>CMAKE_SYSROOT</code> variable):
</p>
<pre class="console"><code>sed -i 's/schroot-name/rpizero-buster/' cmake/armv6-rpi-linux-gnueabihf.cmake</code></pre>
<p>
    You might want to change the toolchain prefix or the architecture-specific flags
    as well. <br />
    If you're using a 64-bit toolchain, edit the
    <code>aarch64-rpi3-linux-gnu.cmake</code> file instead.
</p>

<h3><a name="installing-the-dependencies" href="#installing-the-dependencies">Installing the dependencies</a></h3>

<p>
    Thanks to the <code>sbuild</code> development tools, managing dependencies is
    really easy, you can just install them to the Raspberry Pi OS root filesystem
    using the familiar <code>apt-get install</code> command.
    We use the <code>sbuild-apt</code> tool,
    and specify the name of the root filesystem we created on the previous page.
</p>
<pre class="console"><code>sudo sbuild-apt rpizero-buster-armhf apt-get install libboost-all-dev</code></pre>
<p>
    Now Boost is installed on our build computer, but not yet on the Raspberry Pi itself.
    Let's do that now, using the standard <code>apt install</code> command over SSH:
</p>
<pre class="console"><code>ssh RPi0 sudo apt install -y libboost-all-dev</code></pre>
<p>
    Strictly speaking, we don't need all development libraries on the Pi, so to save some
    time and space, you could install just the libraries you need, e.g.
</p>
<pre class="console"><code>ssh RPi0 sudo apt install -y libboost-program-options1.67.0</code></pre>

<h3><a name="configuring-and-building-the-project" href="#configuring-and-building-the-project">Configuring and building the project</a></h3>

<p>
    Open the <code>~/GitHub/RPi-Cross-Cpp-Development</code> folder in Visual Studio Code
    (using the <kbd>Ctrl+K+O</kbd> shortcut or “Open Folder”).
<p>
<div>
    The CMake Tools extension will now ask you to configure the project. Click “Yes”.
</div>
<div class="img-wrapper"><a href="images/would-you-like-to-configure.png"><img src="images/would-you-like-to-configure.png" alt="images/would-you-like-to-configure.png"/></a></div>
<div>
    Then select the correct toolchain, in this case, we want the “Raspberry Pi (armv6)” toolchain.
</div>
<div class="img-wrapper"><a href="images/select-toolchain.png"><img src="images/select-toolchain.png" alt="images/select-toolchain.png"/></a></div>
<div>
    CMake will now configure the project. If you followed the instructions on the
    previous pages correctly, it finds the <code>armv6-rpi-linux-gnueabihf</code> toolchain
    we installed, as well as the Boost libraries in the Raspberry Pi OS root filesystem.
</div>
<p>
    If CMake raises an error, see the <a href="#troubleshooting">Troubleshooting</a>
    section below.
</p>
<div class="img-wrapper"><a href="images/configured.png"><img src="images/configured.png" alt="images/configured.png"/></a></div>
<div>
    Finally, click the <img src="images/build-icon.png"
        style="border-radius: 2px; height: 1em; display: inline; margin: 0 0 0.1em 0; vertical-align: middle;">
    icon to actually compile the <i>hello world</i> program.
</div>
<div class="img-wrapper"><a href="images/built.png"><img src="images/built.png" alt="images/built.png"/></a></div>

<p>
    You can verify that everything worked correctly using the <code>file</code>
    command:
</p>
<pre
    class="console"><code>file build/hello
build/hello: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, for GNU/Linux 3.2.0, with debug_info, not stripped</code></pre>
<p>
    As you can see, <code>hello</code> is a 32-bit ARM executable, so the cross-compilation was successful.
</p>

<h3><a name="running-the-example-program-on-the-raspberry-pi" href="#running-the-example-program-on-the-raspberry-pi">Running the example program on the Raspberry Pi</a></h3>

<p>
    All we have to do now is copy the <code>hello</code> file to the Raspberry Pi and run it.
    We'll copy it over SSH using the <code>scp</code> command, and then run it over SSH as well:
</p>
<pre class="console"><code>scp build/hello RPi0:~</code>
<code>ssh RPi0 '~/hello' --help</code></pre>
<div class="img-wrapper"><a href="images/copy-run.png"><img src="images/copy-run.png" alt="images/copy-run.png"/></a></div>
<p>
    That's it, you have successfully executed your cross-compiled C++ program on the Raspberry Pi!
</p>

<h3><a name="using-a-staging-directory" href="#using-a-staging-directory">Using a staging directory</a></h3>

<p>
    For larger projects, you usually don't want to have to dig around in the
    <code>build</code> directory to gather all the files you need to copy to the
    Raspberry Pi. Instead, you'll use <code>cmake --install</code> to let
    CMake install all the necessary files into a so-called staging directory on
    your computer, which you can then copy to the Pi.
</p>
<p>
    After building the project as explained in the previous section, press
    <kbd>Ctrl+Shift+P</kbd> in VSCode and execute the <code>CMake: Install</code>
    command. You can then find the <code>hello</code> program in the <code>bin</code>
    subdirectory of
    <code>~/RPi-dev/staging-armv6-rpi</code>.
</p>
<p>
    You'll usually compress the staging folder using <code>tar</code> and then
    deploy it to the Pi by extracting it to the <code>~/.local</code> or
    <code>/usr/local</code> folder.
</p>

<hr>

<h3><a name="a-closer-look-at-the-build-process" href="#a-closer-look-at-the-build-process">A closer look at the build process</a></h3>
<p>
    There's only one source file, <code>main.cpp</code>, and we'll focus on the
    build process, so we won't go into the code in detail here.<br />
    The main <code>CMakeLists.txt</code> file is really basic:
    it just defines the project, looks for the Boost.program_options library,
    compiles <code>main.cpp</code> into an executable with the name <code>hello</code>,
    and then links this executable with the Boost library. Finally, an install
    rule is added to install the <code>hello</code> program to the <code>bin</code>
    folder of the staging directory.
</p>
<h4 class="snippet-name"><a name="cmakelists-txt" href="#cmakelists-txt">CMakeLists.txt</a></h4>
<div class="codesnippet"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.pygments170 .hll { background-color: #ffffcc }
.pygments170 { background: #ffffff; }
.pygments170 .c { color: #008000 } /* Comment */
.pygments170 .err { border: 1px solid #FF0000 } /* Error */
.pygments170 .k { color: #0000ff } /* Keyword */
.pygments170 .l { color: #0000FF } /* Literal */
.pygments170 .ch { color: #008000 } /* Comment.Hashbang */
.pygments170 .cm { color: #008000 } /* Comment.Multiline */
.pygments170 .cp { color: #af00db } /* Comment.Preproc */
.pygments170 .cpf { color: #a31515 } /* Comment.PreprocFile */
.pygments170 .c1 { color: #008000 } /* Comment.Single */
.pygments170 .cs { color: #008000 } /* Comment.Special */
.pygments170 .ge { font-style: italic } /* Generic.Emph */
.pygments170 .gh { font-weight: bold } /* Generic.Heading */
.pygments170 .gp { font-weight: bold } /* Generic.Prompt */
.pygments170 .gs { font-weight: bold } /* Generic.Strong */
.pygments170 .gu { font-weight: bold } /* Generic.Subheading */
.pygments170 .kc { color: #4e8ae9 } /* Keyword.Constant */
.pygments170 .kd { color: #0000ff } /* Keyword.Declaration */
.pygments170 .kn { color: #af00db } /* Keyword.Namespace */
.pygments170 .kp { color: #0000ff } /* Keyword.Pseudo */
.pygments170 .kr { color: #0000ff } /* Keyword.Reserved */
.pygments170 .kt { color: #2b91af } /* Keyword.Type */
.pygments170 .ld { color: #0000FF } /* Literal.Date */
.pygments170 .m { color: #0000FF } /* Literal.Number */
.pygments170 .s { color: #a31515 } /* Literal.String */
.pygments170 .na { color: #001080 } /* Name.Attribute */
.pygments170 .nb { color: #795e26 } /* Name.Builtin */
.pygments170 .nc { color: #2b91af } /* Name.Class */
.pygments170 .no { color: #0000FF } /* Name.Constant */
.pygments170 .nf { color: #795e26 } /* Name.Function */
.pygments170 .nl { color: #AF00DB } /* Name.Label */
.pygments170 .nn { color: #000000 } /* Name.Namespace */
.pygments170 .nt { color: #800000 } /* Name.Tag */
.pygments170 .nv { color: #0F1E87 } /* Name.Variable */
.pygments170 .ow { color: #0000ff } /* Operator.Word */
.pygments170 .mb { color: #09885a } /* Literal.Number.Bin */
.pygments170 .mf { color: #09885a } /* Literal.Number.Float */
.pygments170 .mh { color: #09885a } /* Literal.Number.Hex */
.pygments170 .mi { color: #09885a } /* Literal.Number.Integer */
.pygments170 .mo { color: #09885a } /* Literal.Number.Oct */
.pygments170 .sa { color: #a31515 } /* Literal.String.Affix */
.pygments170 .sb { color: #a31515 } /* Literal.String.Backtick */
.pygments170 .sc { color: #a31515 } /* Literal.String.Char */
.pygments170 .dl { color: #a31515 } /* Literal.String.Delimiter */
.pygments170 .sd { color: #a31515 } /* Literal.String.Doc */
.pygments170 .s2 { color: #a31515 } /* Literal.String.Double */
.pygments170 .se { color: #a31515 } /* Literal.String.Escape */
.pygments170 .sh { color: #a31515 } /* Literal.String.Heredoc */
.pygments170 .si { color: #a31515 } /* Literal.String.Interpol */
.pygments170 .sx { color: #a31515 } /* Literal.String.Other */
.pygments170 .sr { color: #a31515 } /* Literal.String.Regex */
.pygments170 .s1 { color: #a31515 } /* Literal.String.Single */
.pygments170 .ss { color: #a31515 } /* Literal.String.Symbol */
.pygments170 .bp { color: #795e26 } /* Name.Builtin.Pseudo */
.pygments170 .fm { color: #795e26 } /* Name.Function.Magic */
.pygments170 .vc { color: #0F1E87 } /* Name.Variable.Class */
.pygments170 .vg { color: #0F1E87 } /* Name.Variable.Global */
.pygments170 .vi { color: #0F1E87 } /* Name.Variable.Instance */
.pygments170 .vm { color: #0F1E87 } /* Name.Variable.Magic */
.pygments170 .il { color: #09885a } /* Literal.Number.Integer.Long */
.pygments170 pre.snippet170 { counter-reset: line 0; }</style>
<a href="https://github.com/tttapa/RPi-Cross-Cpp-Development/blob/805b5f7d36b6b281d658adaf0cdf1177793c3c98/CMakeLists.txt" title="Open on GitHub"><img class="github-mark" src="/Images/GitHub-Mark.svg"/></a>
<div class="pygments170"><pre class="lineNumbers snippet170"><code><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.16</span><span class="p">)</span></code>
<code><span class="nb">project</span><span class="p">(</span><span class="s">hello</span><span class="w"> </span><span class="s">VERSION</span><span class="w"> </span><span class="s">0.1.0</span><span class="w"> </span><span class="s">LANGUAGES</span><span class="w"> </span><span class="s">C</span><span class="w"> </span><span class="s">CXX</span><span class="w"> </span><span class="s">Fortran</span><span class="p">)</span></code>
<code></code>
<code><span class="nb">find_package</span><span class="p">(</span><span class="s">Boost</span><span class="w"> </span><span class="s">REQUIRED</span><span class="w"> </span><span class="s">COMPONENTS</span><span class="w"> </span><span class="s">program_options</span><span class="p">)</span></code>
<code></code>
<code><span class="nb">add_executable</span><span class="p">(</span><span class="s">hello</span><span class="w"> </span><span class="s">main.cpp</span><span class="p">)</span></code>
<code><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">hello</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">Boost::program_options</span><span class="p">)</span></code>
<code></code>
<code><span class="nb">include</span><span class="p">(</span><span class="s">GNUInstallDirs</span><span class="p">)</span></code>
<code><span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span><span class="w"> </span><span class="s">hello</span></code>
<code><span class="w">        </span><span class="s">RUNTIME</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_INSTALL_BINDIR</span><span class="o">}</span><span class="p">)</span></code></pre></div>
</div>
<p>
    The way we tell CMake to cross-compile this project for the Raspberry Pi is
    using a so-called toolchain file. You can find more information on
    <a
        href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html#cross-compiling">https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html#cross-compiling</a>.
</p>
<h4 class="snippet-name"><a name="cmake-armv6-rpi-linux-gnueabihf-cmake" href="#cmake-armv6-rpi-linux-gnueabihf-cmake">cmake/armv6-rpi-linux-gnueabihf.cmake</a></h4>
<div class="codesnippet"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.pygments180 .hll { background-color: #ffffcc }
.pygments180 { background: #ffffff; }
.pygments180 .c { color: #008000 } /* Comment */
.pygments180 .err { border: 1px solid #FF0000 } /* Error */
.pygments180 .k { color: #0000ff } /* Keyword */
.pygments180 .l { color: #0000FF } /* Literal */
.pygments180 .ch { color: #008000 } /* Comment.Hashbang */
.pygments180 .cm { color: #008000 } /* Comment.Multiline */
.pygments180 .cp { color: #af00db } /* Comment.Preproc */
.pygments180 .cpf { color: #a31515 } /* Comment.PreprocFile */
.pygments180 .c1 { color: #008000 } /* Comment.Single */
.pygments180 .cs { color: #008000 } /* Comment.Special */
.pygments180 .ge { font-style: italic } /* Generic.Emph */
.pygments180 .gh { font-weight: bold } /* Generic.Heading */
.pygments180 .gp { font-weight: bold } /* Generic.Prompt */
.pygments180 .gs { font-weight: bold } /* Generic.Strong */
.pygments180 .gu { font-weight: bold } /* Generic.Subheading */
.pygments180 .kc { color: #4e8ae9 } /* Keyword.Constant */
.pygments180 .kd { color: #0000ff } /* Keyword.Declaration */
.pygments180 .kn { color: #af00db } /* Keyword.Namespace */
.pygments180 .kp { color: #0000ff } /* Keyword.Pseudo */
.pygments180 .kr { color: #0000ff } /* Keyword.Reserved */
.pygments180 .kt { color: #2b91af } /* Keyword.Type */
.pygments180 .ld { color: #0000FF } /* Literal.Date */
.pygments180 .m { color: #0000FF } /* Literal.Number */
.pygments180 .s { color: #a31515 } /* Literal.String */
.pygments180 .na { color: #001080 } /* Name.Attribute */
.pygments180 .nb { color: #795e26 } /* Name.Builtin */
.pygments180 .nc { color: #2b91af } /* Name.Class */
.pygments180 .no { color: #0000FF } /* Name.Constant */
.pygments180 .nf { color: #795e26 } /* Name.Function */
.pygments180 .nl { color: #AF00DB } /* Name.Label */
.pygments180 .nn { color: #000000 } /* Name.Namespace */
.pygments180 .nt { color: #800000 } /* Name.Tag */
.pygments180 .nv { color: #0F1E87 } /* Name.Variable */
.pygments180 .ow { color: #0000ff } /* Operator.Word */
.pygments180 .mb { color: #09885a } /* Literal.Number.Bin */
.pygments180 .mf { color: #09885a } /* Literal.Number.Float */
.pygments180 .mh { color: #09885a } /* Literal.Number.Hex */
.pygments180 .mi { color: #09885a } /* Literal.Number.Integer */
.pygments180 .mo { color: #09885a } /* Literal.Number.Oct */
.pygments180 .sa { color: #a31515 } /* Literal.String.Affix */
.pygments180 .sb { color: #a31515 } /* Literal.String.Backtick */
.pygments180 .sc { color: #a31515 } /* Literal.String.Char */
.pygments180 .dl { color: #a31515 } /* Literal.String.Delimiter */
.pygments180 .sd { color: #a31515 } /* Literal.String.Doc */
.pygments180 .s2 { color: #a31515 } /* Literal.String.Double */
.pygments180 .se { color: #a31515 } /* Literal.String.Escape */
.pygments180 .sh { color: #a31515 } /* Literal.String.Heredoc */
.pygments180 .si { color: #a31515 } /* Literal.String.Interpol */
.pygments180 .sx { color: #a31515 } /* Literal.String.Other */
.pygments180 .sr { color: #a31515 } /* Literal.String.Regex */
.pygments180 .s1 { color: #a31515 } /* Literal.String.Single */
.pygments180 .ss { color: #a31515 } /* Literal.String.Symbol */
.pygments180 .bp { color: #795e26 } /* Name.Builtin.Pseudo */
.pygments180 .fm { color: #795e26 } /* Name.Function.Magic */
.pygments180 .vc { color: #0F1E87 } /* Name.Variable.Class */
.pygments180 .vg { color: #0F1E87 } /* Name.Variable.Global */
.pygments180 .vi { color: #0F1E87 } /* Name.Variable.Instance */
.pygments180 .vm { color: #0F1E87 } /* Name.Variable.Magic */
.pygments180 .il { color: #09885a } /* Literal.Number.Integer.Long */
.pygments180 pre.snippet180 { counter-reset: line 0; }</style>
<a href="https://github.com/tttapa/RPi-Cross-Cpp-Development/blob/711cf41f0c1343a382e731fda6e8aa527bea7ad1/cmake/armv6-rpi-linux-gnueabihf.cmake" title="Open on GitHub"><img class="github-mark" src="/Images/GitHub-Mark.svg"/></a>
<div class="pygments180"><pre class="lineNumbers snippet180"><code><span></span><span class="c"># https://cmake.org/cmake/help/book/mastering-cmake/chapter/Cross%20Compiling%20With%20CMake.html</span></code>
<code></code>
<code><span class="c"># Cross-compilation system information</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_SYSTEM_NAME</span><span class="w"> </span><span class="s">Linux</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_SYSTEM_PROCESSOR</span><span class="w"> </span><span class="s">arm</span><span class="p">)</span></code>
<code></code>
<code><span class="c"># The sysroot contains all the libraries we might need to link against and </span></code>
<code><span class="c"># possibly headers we need for compilation</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_SYSROOT</span><span class="w"> </span><span class="s">/var/lib/schroot/chroots/rpizero-buster-armhf</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_FIND_ROOT_PATH</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_SYSROOT</span><span class="o">}</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_LIBRARY_ARCHITECTURE</span><span class="w"> </span><span class="s">arm-linux-gnueabihf</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_STAGING_PREFIX</span><span class="w"> </span><span class="o">$ENV{</span><span class="nv">HOME</span><span class="o">}</span><span class="s">/RPi-dev/staging-armv6-rpi</span><span class="p">)</span></code>
<code></code>
<code><span class="c"># Set the compilers for C, C++ and Fortran</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">RPI_GCC_TRIPLE</span><span class="w"> </span><span class="s2">&quot;armv6-rpi-linux-gnueabihf&quot;</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_C_COMPILER</span><span class="w"> </span><span class="o">${</span><span class="nv">RPI_GCC_TRIPLE</span><span class="o">}</span><span class="s">-gcc</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">FILEPATH</span><span class="w"> </span><span class="s2">&quot;C compiler&quot;</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_COMPILER</span><span class="w"> </span><span class="o">${</span><span class="nv">RPI_GCC_TRIPLE</span><span class="o">}</span><span class="s">-g++</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">FILEPATH</span><span class="w"> </span><span class="s2">&quot;C++ compiler&quot;</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_Fortran_COMPILER</span><span class="w"> </span><span class="o">${</span><span class="nv">RPI_GCC_TRIPLE</span><span class="o">}</span><span class="s">-gfortran</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">FILEPATH</span><span class="w"> </span><span class="s2">&quot;Fortran compiler&quot;</span><span class="p">)</span></code>
<code></code>
<code><span class="c"># Set the architecture-specific compiler flags</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">ARCH_FLAGS</span><span class="w"> </span><span class="s2">&quot;-mcpu=arm1176jzf-s&quot;</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_C_FLAGS_INIT</span><span class="w"> </span><span class="o">${</span><span class="nv">ARCH_FLAGS</span><span class="o">}</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS_INIT</span><span class="w"> </span><span class="o">${</span><span class="nv">ARCH_FLAGS</span><span class="o">}</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_Fortran_FLAGS_INIT</span><span class="w"> </span><span class="o">${</span><span class="nv">ARCH_FLAGS</span><span class="o">}</span><span class="p">)</span></code>
<code></code>
<code><span class="c"># Don&#39;t look for programs in the sysroot (these are ARM programs, they won&#39;t run</span></code>
<code><span class="c"># on the build machine)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_FIND_ROOT_PATH_MODE_PROGRAM</span><span class="w"> </span><span class="s">NEVER</span><span class="p">)</span></code>
<code><span class="c"># Only look for libraries, headers and packages in the sysroot, don&#39;t look on </span></code>
<code><span class="c"># the build machine</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_FIND_ROOT_PATH_MODE_LIBRARY</span><span class="w"> </span><span class="s">ONLY</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_FIND_ROOT_PATH_MODE_INCLUDE</span><span class="w"> </span><span class="s">ONLY</span><span class="p">)</span></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_FIND_ROOT_PATH_MODE_PACKAGE</span><span class="w"> </span><span class="s">ONLY</span><span class="p">)</span></code>
<code></code>
<code><span class="nb">set</span><span class="p">(</span><span class="s">CPACK_DEBIAN_PACKAGE_ARCHITECTURE</span><span class="w"> </span><span class="s">armhf</span><span class="p">)</span></code></pre></div>
</div>
<p>
    First we set the system name and architecture, then we set some paths to
    the sysroot, so that CMake will be able to find the Boost library.
    If you gave your chroot a different name, you have to change these
    paths.
    The <code>CMAKE_STAGING_PREFIX</code> variable is useful for installing your
    project to a “staging” directory for deploying to the Pi.
    The <code>CMAKE_LIBRARY_ARCHITECTURE</code> variable
    helps CMake find libraries in Debian's Multiarch directory structure,
    e.g. in <code>/usr/lib/arm-linux-gnueabihf/</code>.
</p>
<p>
    Next, we tell CMake to use the <code>armv6-rpi-linux-gnueabihf</code>
    cross-compilers, and we set some compiler flags. The <code>-mcpu</code> flag
    is a bit redundant here, since the toolchain is already configured to
    generate code for that specific CPU, but it serves as an example, you might
    want to add more specific flags.
</p>
<p>
    Finally, we tell CMake never to run any programs it finds in the sysroot
    (because they are ARM binaries, you cannot run them on your computer
    without extra steps), and it should only look for libraries, headers and
    packages in the sysroot. We don't want CMake to find and use packages
    installed on our computer, because these are x86_64 libraries, not ARM.
</p>
<p>
    The CMake Tools VSCode extension picks up these toolchain files using the
    following configuration file:
</p>
<h4 class="snippet-name"><a name="-vscode-cmake-kits-json" href="#-vscode-cmake-kits-json">.vscode/cmake-kits.json</a></h4>
<div class="codesnippet"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.pygments213 .hll { background-color: #ffffcc }
.pygments213 { background: #ffffff; }
.pygments213 .c { color: #008000 } /* Comment */
.pygments213 .err { border: 1px solid #FF0000 } /* Error */
.pygments213 .k { color: #0000ff } /* Keyword */
.pygments213 .l { color: #0000FF } /* Literal */
.pygments213 .ch { color: #008000 } /* Comment.Hashbang */
.pygments213 .cm { color: #008000 } /* Comment.Multiline */
.pygments213 .cp { color: #af00db } /* Comment.Preproc */
.pygments213 .cpf { color: #a31515 } /* Comment.PreprocFile */
.pygments213 .c1 { color: #008000 } /* Comment.Single */
.pygments213 .cs { color: #008000 } /* Comment.Special */
.pygments213 .ge { font-style: italic } /* Generic.Emph */
.pygments213 .gh { font-weight: bold } /* Generic.Heading */
.pygments213 .gp { font-weight: bold } /* Generic.Prompt */
.pygments213 .gs { font-weight: bold } /* Generic.Strong */
.pygments213 .gu { font-weight: bold } /* Generic.Subheading */
.pygments213 .kc { color: #4e8ae9 } /* Keyword.Constant */
.pygments213 .kd { color: #0000ff } /* Keyword.Declaration */
.pygments213 .kn { color: #af00db } /* Keyword.Namespace */
.pygments213 .kp { color: #0000ff } /* Keyword.Pseudo */
.pygments213 .kr { color: #0000ff } /* Keyword.Reserved */
.pygments213 .kt { color: #2b91af } /* Keyword.Type */
.pygments213 .ld { color: #0000FF } /* Literal.Date */
.pygments213 .m { color: #0000FF } /* Literal.Number */
.pygments213 .s { color: #a31515 } /* Literal.String */
.pygments213 .na { color: #001080 } /* Name.Attribute */
.pygments213 .nb { color: #795e26 } /* Name.Builtin */
.pygments213 .nc { color: #2b91af } /* Name.Class */
.pygments213 .no { color: #0000FF } /* Name.Constant */
.pygments213 .nf { color: #795e26 } /* Name.Function */
.pygments213 .nl { color: #AF00DB } /* Name.Label */
.pygments213 .nn { color: #000000 } /* Name.Namespace */
.pygments213 .nt { color: #800000 } /* Name.Tag */
.pygments213 .nv { color: #0F1E87 } /* Name.Variable */
.pygments213 .ow { color: #0000ff } /* Operator.Word */
.pygments213 .mb { color: #09885a } /* Literal.Number.Bin */
.pygments213 .mf { color: #09885a } /* Literal.Number.Float */
.pygments213 .mh { color: #09885a } /* Literal.Number.Hex */
.pygments213 .mi { color: #09885a } /* Literal.Number.Integer */
.pygments213 .mo { color: #09885a } /* Literal.Number.Oct */
.pygments213 .sa { color: #a31515 } /* Literal.String.Affix */
.pygments213 .sb { color: #a31515 } /* Literal.String.Backtick */
.pygments213 .sc { color: #a31515 } /* Literal.String.Char */
.pygments213 .dl { color: #a31515 } /* Literal.String.Delimiter */
.pygments213 .sd { color: #a31515 } /* Literal.String.Doc */
.pygments213 .s2 { color: #a31515 } /* Literal.String.Double */
.pygments213 .se { color: #a31515 } /* Literal.String.Escape */
.pygments213 .sh { color: #a31515 } /* Literal.String.Heredoc */
.pygments213 .si { color: #a31515 } /* Literal.String.Interpol */
.pygments213 .sx { color: #a31515 } /* Literal.String.Other */
.pygments213 .sr { color: #a31515 } /* Literal.String.Regex */
.pygments213 .s1 { color: #a31515 } /* Literal.String.Single */
.pygments213 .ss { color: #a31515 } /* Literal.String.Symbol */
.pygments213 .bp { color: #795e26 } /* Name.Builtin.Pseudo */
.pygments213 .fm { color: #795e26 } /* Name.Function.Magic */
.pygments213 .vc { color: #0F1E87 } /* Name.Variable.Class */
.pygments213 .vg { color: #0F1E87 } /* Name.Variable.Global */
.pygments213 .vi { color: #0F1E87 } /* Name.Variable.Instance */
.pygments213 .vm { color: #0F1E87 } /* Name.Variable.Magic */
.pygments213 .il { color: #09885a } /* Literal.Number.Integer.Long */
.pygments213 pre.snippet213 { counter-reset: line 0; }</style>
<a href="https://github.com/tttapa/RPi-Cross-Cpp-Development/blob/711cf41f0c1343a382e731fda6e8aa527bea7ad1/.vscode/cmake-kits.json" title="Open on GitHub"><img class="github-mark" src="/Images/GitHub-Mark.svg"/></a>
<div class="pygments213"><pre class="lineNumbers snippet213"><code><span></span><span class="p">[</span></code>
<code><span class="w">    </span><span class="p">{</span></code>
<code><span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Raspberry Pi 3 (aarch64)&quot;</span><span class="p">,</span></code>
<code><span class="w">        </span><span class="nt">&quot;toolchainFile&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${workspaceFolder}/cmake/aarch64-rpi3-linux-gnu.cmake&quot;</span></code>
<code><span class="w">    </span><span class="p">},</span></code>
<code><span class="w">    </span><span class="p">{</span></code>
<code><span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Raspberry Pi 3 Clang (aarch64)&quot;</span><span class="p">,</span></code>
<code><span class="w">        </span><span class="nt">&quot;toolchainFile&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${workspaceFolder}/cmake/aarch64-rpi3-linux-gnu-clang.cmake&quot;</span></code>
<code><span class="w">    </span><span class="p">},</span></code>
<code><span class="w">    </span><span class="p">{</span></code>
<code><span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Raspberry Pi (armv6)&quot;</span><span class="p">,</span></code>
<code><span class="w">        </span><span class="nt">&quot;toolchainFile&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${workspaceFolder}/cmake/armv6-rpi-linux-gnueabihf.cmake&quot;</span><span class="p">,</span></code>
<code><span class="w">        </span><span class="nt">&quot;environmentVariables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span></code>
<code><span class="w">            </span><span class="nt">&quot;PATH&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${env:HOME}/opt/x-tools/armv6-rpi-linux-gnueabihf/bin:${env:PATH}&quot;</span></code>
<code><span class="w">        </span><span class="p">}</span></code>
<code><span class="w">    </span><span class="p">}</span></code>
<code><span class="p">]</span></code></pre></div>
</div>
<p>
    You can see that there's a second toolchain file for newer 64-bit boards.
    If you need different configurations for different Pi models, you can add
    them here and easily switch between them by clicking the CMake Kit button
    in VSCode.
</p>

<h3><a name="manual-build" href="#manual-build">Manual build</a></h3>
<p>
    If you don't want to use VSCode as your editor, you can also build the
    project from the command line:
</p>
<pre class="console"><code>cd ~/GitHub/RPi-Cross-Cpp-Development</code>
<code>rm -rf build</code>
<code>cmake -S . -B build -DCMAKE_TOOLCHAIN_FILE=cmake/armv6-rpi-linux-gnueabihf.cmake</code>
<code>cmake --build build -j</code>
<code>cmake --install build</code></pre>

<hr>

<h3><a name="troubleshooting" href="#troubleshooting">Troubleshooting</a></h3>

<p>
    This section covers some common problems that you might run into. After
    fixing them, you can re-run CMake by pressing <kbd>Ctrl+Shift+P</kbd>
    in VSCode and executing the <code>CMake: Delete Cache and Reconfigure</code>
    command.
</p>
<h4><a name="compiler-not-found" href="#compiler-not-found">Compiler not found</a></h4>

<pre class="lineNumbersEmphasis"><code class="emphasis"><code>   The CMAKE_C_COMPILER:</code></code>
<code class="emphasis"><code> </code></code>
<code class="emphasis"><code>     armv6-rpi-linux-gnueabihf-gcc</code></code>
<code class="emphasis"><code> </code></code>
<code class="emphasis"><code>   is not a full path and was not found in the PATH.</code></code></pre>
<p>
    This indicates that you either didn't download and install the toolchain
    correctly, or that it has not been added to the PATH. See
    <a href="Development-setup.html#install-the-toolchain">the previous page</a>
    for more details.
</p>
<p>
    Note that changing the
    PATH in <code>~/.profile</code> only has effect after logging out and back
    in again. <br />
    If you used <code>export PATH="..."</code> in a terminal, this only affects
    the current terminal, so unless you start VSCode from that terminal, it
    won't see the updated PATH.
</p>

<h4><a name="compiler-is-not-able-to-compile-a-simple-test-program" href="#compiler-is-not-able-to-compile-a-simple-test-program">Compiler is not able to compile a simple test program</a></h4>

<pre class="lineNumbersEmphasis"><code><code> -- Check for working C compiler: ~/opt/x-tools/armv6-rpi-linux-gnueabihf/bin/armv6-rpi-linux-gnueabihf-gcc - broken</code></code>
<code><code> CMake Error at ~/.local/share/cmake-3.22/Modules/CMakeTestCCompiler.cmake:69 (message):</code></code>
<code class="emphasis"><code>   The C compiler</code></code>
<code class="emphasis"><code> </code></code>
<code class="emphasis"><code>     "~/opt/x-tools/armv6-rpi-linux-gnueabihf/bin/armv6-rpi-linux-gnueabihf-gcc"</code></code>
<code class="emphasis"><code> </code></code>
<code class="emphasis"><code>   is not able to compile a simple test program.</code></code>
<code><code> </code></code>
<code><code>   It fails with the following output:</code></code>
<code><code> </code></code>
<code><code>     Change Dir: ~/GitHub/RPi-Cross-Cpp-Development/build/CMakeFiles/CMakeTmp</code></code>
<code><code>     </code></code>
<code><code>     Run Build Command(s):/usr/bin/ninja cmTC_f7b02 && [1/2] Building C object CMakeFiles/cmTC_f7b02.dir/testCCompiler.c.o</code></code>
<code><code>     [2/2] Linking C executable cmTC_f7b02</code></code>
<code><code>     FAILED: cmTC_f7b02 </code></code>
<code><code>     : && ~/opt/x-tools/armv6-rpi-linux-gnueabihf/bin/armv6-rpi-linux-gnueabihf-gcc --sysroot=/var/lib/schroot/chroots/wrong-name-armhf -mcpu=arm1176jzf-s -mcpu=arm1176jzf-s  CMakeFiles/cmTC_f7b02.dir/testCCompiler.c.o -o cmTC_f7b02   && :</code></code>
<code><code>     ~/opt/x-tools/armv6-rpi-linux-gnueabihf/bin/../lib/gcc/armv6-rpi-linux-gnueabihf/11.2.0/../../../../armv6-rpi-linux-gnueabihf/bin/ld.bfd: cannot find crt1.o: No such file or directory</code></code>
<code><code>     ~/opt/x-tools/armv6-rpi-linux-gnueabihf/bin/../lib/gcc/armv6-rpi-linux-gnueabihf/11.2.0/../../../../armv6-rpi-linux-gnueabihf/bin/ld.bfd: cannot find crti.o: No such file or directory</code></code>
<code><code>     collect2: error: ld returned 1 exit status</code></code></pre>

<p>
    This error indicates that the path to the root filesystem is not correct.
    Make sure that the <code>CMAKE_SYSROOT</code> variable is set to the correct
    schroot you created on the <a href="Development-setup.html#create-a-raspberry-pi-os-root-filesystem">previous
        page</a>,
    double check the name (with the architecture as suffix), and check that the
    folder exists.
</p>

<h4><a name="boost-not-found" href="#boost-not-found">Boost not found</a></h4>

<pre class="lineNumbersEmphasis"><code><code> CMake Error at ~/.local/share/cmake-3.22/Modules/FindPackageHandleStandardArgs.cmake:230 (message):</code></code>
<code class="emphasis"><code>   Could NOT find Boost (missing: Boost_INCLUDE_DIR program_options)</code></code>
<code><code> Call Stack (most recent call first):</code></code>
<code><code>   ~/.local/share/cmake-3.22/Modules/FindPackageHandleStandardArgs.cmake:594 (_FPHSA_FAILURE_MESSAGE)</code></code>
<code><code>   ~/.local/share/cmake-3.22/Modules/FindBoost.cmake:2375 (find_package_handle_standard_args)</code></code>
<code><code>   CMakeLists.txt:4 (find_package)</code></code></pre>

<p>
    This error occurs when the Boost development package is not installed in
    your root filesystem. Follow the <a href="#installing-the-dependencies">Installing the dependencies</a>
    section to install it.
</p>

</div>
        <hr id="end-of-article">
        <div class="nextupprev"><div class="prevpage"><a href="Development-setup.html" title="Development setup"><i class="material-icons" style="vertical-align: middle; text-decoration: none">chevron_left </i>Previous Page</a></div><div class="uppage"><a href="index.html" title="Ubuntu to Raspberry Pi OS Cross C++ Development">Index</a></div><div class="nextpage"><a href="Debugging.html" title="Remote debugging">Next Page<i class="material-icons" style="vertical-align: middle; text-decoration: none"> chevron_right</i></a></div></div>
    </article>
    <footer>Last edited: Saturday, 05 February 2022 16:20 UTC</footer>
</body>

</html>